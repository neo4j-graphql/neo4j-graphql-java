:toc:
:toclevels: 42

= integration/rfcs/query-limits

== Top Level Query Limits

=== should limit the top level query

.Schema
[source,graphql,schema=true]
----
type Movie @limit(default: 2) {
  id: ID!
}
----

.Test Data
[source,cypher,test-data=true]
----
WITH [1,2,3,4,5] AS iterate
 UNWIND iterate AS i
 CREATE (:Movie {id: "A"})
----

.GraphQL-Query
[source,graphql]
----
{
  movies {
    id
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": 2
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WITH * LIMIT $param0
RETURN this {
	.id
} AS this
----

.GraphQL-Response
[source,json,response=true,ignore-order]
----
{
  "movies": [
    {
      "id": "A"
    },
    {
      "id": "A"
    }
  ]
}
----

'''

