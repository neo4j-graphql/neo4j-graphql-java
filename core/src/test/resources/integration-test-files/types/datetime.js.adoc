// This file was generated by the Test-Case extractor of neo4j-graphql
:toc:
:toclevels: 42

= DateTime

== find

=== should find a movie (with a DateTime)

.Schema
[source,graphql,schema=true]
----
type Movie {
  datetime: DateTime
}
----

.Test Data
[source,cypher,test-data=true]
----
CREATE (m:Movie)
 SET m.datetime = datetime("2024-12-24T18:42:24.123000000Z")
----

.GraphQL-Query
[source,graphql,request=true]
----
{
  movies(where: {datetime: "2024-12-24T18:42:24.123Z"}) {
    datetime
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": "2024-12-24T18:42:24.123000000Z"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WHERE this.datetime = $param0
RETURN this { datetime: apoc.date.convertFormat(toString(this.datetime), "iso_zoned_date_time", "iso_offset_date_time") } AS this
----

.GraphQL-Response
[source,json,response=true]
----
{
  "movies": [
    {
      "datetime": "2024-12-24T18:42:24.123Z"
    }
  ]
}
----

=== should find a movie (with a DateTime created with a timezone)

.Schema
[source,graphql,schema=true]
----
type Movie {
  name: String
  datetime: DateTime
}
----

.Test Data
[source,cypher,test-data=true]
----
CREATE (m:Movie)
 SET m.name = "Movie"
 SET m.datetime = datetime("2024-12-24T18:42:24.123[Etc/UTC]")
----

.GraphQL-Query
[source,graphql,request=true]
----
{
  movies(where: {name: "Movie"}) {
    datetime
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": "Movie"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WHERE this.name = $param0
RETURN this { datetime: apoc.date.convertFormat(toString(this.datetime), "iso_zoned_date_time", "iso_offset_date_time") } AS this
----

.GraphQL-Response
[source,json,response=true]
----
{
  "movies": [
    {
      "datetime": "2024-12-24T18:42:24.123Z"
    }
  ]
}
----
