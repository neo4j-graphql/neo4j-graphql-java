// This file was generated by the Test-Case extractor of neo4j-graphql
:toc:
:toclevels: 42

= undirected relationships

== query for an undirected relationship

.Schema
[source,graphql,schema=true]
----
type User {
  name: String!
  friends: [User!]! @relationship(type: "FRIENDS_WITH", direction: OUT)
}
----

.Test Data
[source,cypher,test-data=true]
----
CREATE (a:User {name: "Arthur"})
 CREATE (b:User {name: "Ford"})
 CREATE (a)-[:FRIENDS_WITH]->(b)
----

.GraphQL-Query
[source,graphql,request=true]
----
{
  users(where: {name: "Ford"}) {
    name
    friends: friends(directed: false) {
      name
    }
    directedFriends: friends(directed: true) {
      name
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": "Ford"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:User)
WHERE this.name = $param0
CALL {
    WITH this
    MATCH (this)-[this0:FRIENDS_WITH]-(this1:User)
    WITH this1 { .name } AS this1
    RETURN collect(this1) AS var2
}
CALL {
    WITH this
    MATCH (this)-[this3:FRIENDS_WITH]->(this4:User)
    WITH this4 { .name } AS this4
    RETURN collect(this4) AS var5
}
RETURN this { .name, friends: var2, directedFriends: var5 } AS this
----

.GraphQL-Response
[source,json,response=true]
----
{
  "users": [
    {
      "name": "Ford",
      "friends": [
        {
          "name": "Arthur"
        }
      ],
      "directedFriends": []
    }
  ]
}
----
