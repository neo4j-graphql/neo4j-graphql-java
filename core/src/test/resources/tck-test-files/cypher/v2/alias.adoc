:toc:

= Cypher Alias

== Source schema

[source,graphql,schema=true]
----
type Actor {
  name: String!
}

type Movie {
  id: ID
  releaseDate: DateTime!
  location: Point!
  actors: [Actor!]! @relationship(type: "ACTED_IN", direction: IN)
  custom: [Movie!]! @cypher(statement: """
  MATCH (m:Movie)
  RETURN m
  """, columnName: "m")
}
----
== Alias

.GraphQL-Query
[source,graphql]
----
{
  movies {
    movieId: id
    actors {
      aliasActorsName: name
    }
    custom {
      aliasCustomId: id
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
CALL {
    WITH this
    CALL {
        WITH this
        WITH this AS this
        MATCH (m:Movie)
        RETURN m
    }
    WITH m AS this0
    WITH this0 { aliasCustomId: this0.id } AS this0
    RETURN collect(this0) AS var1
}
CALL {
    WITH this
    MATCH (this)<-[this2:ACTED_IN]-(this3:Actor)
    WITH this3 { aliasActorsName: this3.name } AS this3
    RETURN collect(this3) AS var4
}
RETURN this { movieId: this.id, actors: var4, custom: var1 } AS this
----

'''

