:toc:

= Cypher -> fulltext -> Match

== Source schema

[source,graphql,schema=true]
----
type Movie @fulltext(indexes: [{name: "MovieTitle", fields: ["title"]}]) {
  title: String
}
----
== match with where and single fulltext property

.GraphQL-Query
[source,graphql]
----
{
  movies(
    fulltext: {MovieTitle: {phrase: "something AND something"}}
    where: {title: "some-title"}
  ) {
    title
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0" : "something AND something",
  "param1" : "Movie",
  "param2" : "some-title"
}
----

.Expected Cypher output
[source,cypher]
----
CALL db.index.fulltext.queryNodes('MovieTitle', $param0) YIELD node AS this0, score AS var1
WHERE ($param1 IN labels(this0)
	AND this0.title = $param2)
RETURN this0 {
	.title
} AS this
----

'''

== simple match with single fulltext property

.GraphQL-Query
[source,graphql]
----
{
  movies(fulltext: {MovieTitle: {phrase: "something AND something"}}) {
    title
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0" : "something AND something",
  "param1" : "Movie"
}
----

.Expected Cypher output
[source,cypher]
----
CALL db.index.fulltext.queryNodes('MovieTitle', $param0) YIELD node AS this0, score AS var1
WHERE $param1 IN labels(this0)
RETURN this0 {
	.title
} AS this
----

'''

