// This file was generated by the Test-Case extractor of neo4j-graphql
:toc:
:toclevels: 42

= https://github.com/neo4j/graphql/issues/2713

== Setup

.Schema
[source,graphql,schema=true]
----
type Movie {
  title: String
  genres: [Genre!]! @relationship(type: "IN_GENRE", direction: OUT, properties: "InGenre")
}

type Genre {
  name: String
  movies: [Movie!]! @relationship(type: "IN_GENRE", direction: IN, properties: "InGenre")
  series: [Series!]! @relationship(type: "IN_GENRE", direction: IN, properties: "InGenre")
}

type Series {
  name: String!
  genres: [Genre!]! @relationship(type: "IN_GENRE", direction: OUT, properties: "InGenre")
}

type InGenre @relationshipProperties {
  intValue: Int!
}
----

== should not find genresConnection_ALL by genre title

.GraphQL-Query
[source,graphql,request=true]
----
{
  movies(where: {genresConnection_ALL: {node: {name: "Thriller"}}}) {
    title
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": "Thriller"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WHERE (EXISTS {
    MATCH (this)-[this0:IN_GENRE]->(this1:Genre)
    WHERE this1.name = $param0
} AND NOT (EXISTS {
    MATCH (this)-[this0:IN_GENRE]->(this1:Genre)
    WHERE NOT (this1.name = $param0)
}))
RETURN this { .title } AS this
----
