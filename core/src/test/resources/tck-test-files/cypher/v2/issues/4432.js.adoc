// This file was generated by the Test-Case extractor of neo4j-graphql
:toc:
:toclevels: 42

= https://github.com/neo4j/graphql/issues/4532

== connections to interfaces with sort

.Schema
[source,graphql,schema=true]
----
type Inventory {
  id: ID
  children: [Scenario!]! @relationship(type: "HasChildren", properties: "InventoryChildRelation", direction: OUT)
}

interface Scenario {
  id: ID
}

type Image implements Scenario {
  id: ID
}

type Video implements Scenario {
  id: ID
}

type InventoryChildRelation @relationshipProperties {
  order: Int
}
----

.GraphQL-Query
[source,graphql,request=true]
----
{
  inventories {
    id
    childrenConnection(sort: {edge: {order: ASC}}) {
      edges {
        properties {
          order
        }
        node {
          id
        }
      }
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Inventory)
CALL {
    WITH this
    CALL {
        WITH this
        MATCH (this)-[this0:HasChildren]->(this1:Image)
        WITH { properties: { order: this0.order, __typename: "InventoryChildRelation" }, node: { __typename: "Image", __id: toString(id(this1)), id: this1.id } } AS edge
        RETURN edge
        UNION
        WITH this
        MATCH (this)-[this2:HasChildren]->(this3:Video)
        WITH { properties: { order: this2.order, __typename: "InventoryChildRelation" }, node: { __typename: "Video", __id: toString(id(this3)), id: this3.id } } AS edge
        RETURN edge
    }
    WITH collect(edge) AS edges
    WITH edges, size(edges) AS totalCount
    CALL {
        WITH edges
        UNWIND edges AS edge
        WITH edge
        ORDER BY edge.properties.order ASC
        RETURN collect(edge) AS var4
    }
    RETURN { edges: var4, totalCount: totalCount } AS var5
}
RETURN this { .id, childrenConnection: var5 } AS this
----
