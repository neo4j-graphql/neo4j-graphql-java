:toc:

= Aggregations -> Where Level Aggregations

== Source schema

[source,graphql,schema=true]
----
type User {
  someId: ID
  someString: String
  someFloat: Float
  someInt: Int
  someBigInt: BigInt
  someDateTime: DateTime
  someLocalDateTime: LocalDateTime
  someLocalTime: LocalTime
  someTime: Time
  someDuration: Duration
}

type Post {
  title: String
  likes: [User!]! @relationship(type: "LIKES", direction: IN, properties: "Likes")
}

type Likes @relationshipProperties {
  someId: ID
  someString: String
  someFloat: Float
  someInt: Int
  someBigInt: BigInt
  someDateTime: DateTime
  someLocalDateTime: LocalDateTime
  someLocalTime: LocalTime
  someTime: Time
  someDuration: Duration
}
----

== Augmented schema

.Augmented Schema
[source,graphql]
----
schema {
  query: Query
}

"""
The edge properties for the following fields:
* Post.likes
"""
type Likes {
  someBigInt: BigInt
  someDateTime: DateTime
  someDuration: Duration
  someFloat: Float
  someId: ID
  someInt: Int
  someLocalDateTime: LocalDateTime
  someLocalTime: LocalTime
  someString: String
  someTime: Time
}

"Pagination information (Relay)"
type PageInfo {
  endCursor: String
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
}

type Post {
  likes(directed: Boolean = true, options: UserOptions, where: UserWhere): [User!]!
  likesConnection(after: String, directed: Boolean = true, first: Int, sort: [PostLikesConnectionSort!], where: PostLikesConnectionWhere): PostLikesConnection!
  title: String
}

type PostEdge {
  cursor: String!
  node: Post!
}

type PostLikesConnection {
  edges: [PostLikesRelationship!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type PostLikesRelationship {
  cursor: String!
  node: User!
  properties: Likes!
}

type PostsConnection {
  edges: [PostEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type Query {
  posts(options: PostOptions, where: PostWhere): [Post!]!
  postsConnection(after: String, first: Int, sort: [PostSort], where: PostWhere): PostsConnection!
  users(options: UserOptions, where: UserWhere): [User!]!
  usersConnection(after: String, first: Int, sort: [UserSort], where: UserWhere): UsersConnection!
}

type User {
  someBigInt: BigInt
  someDateTime: DateTime
  someDuration: Duration
  someFloat: Float
  someId: ID
  someInt: Int
  someLocalDateTime: LocalDateTime
  someLocalTime: LocalTime
  someString: String
  someTime: Time
}

type UserEdge {
  cursor: String!
  node: User!
}

type UsersConnection {
  edges: [UserEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

"An enum for sorting in either ascending or descending order."
enum SortDirection {
  "Sort by field values in ascending order."
  ASC
  "Sort by field values in descending order."
  DESC
}

"A BigInt value up to 64 bits in size, which can be a number or a string if used inline, or a string only if used as a variable. Always returned as a string."
scalar BigInt

"A date and time, represented as an ISO-8601 string"
scalar DateTime

"A duration, represented as an ISO 8601 duration string"
scalar Duration

"A local datetime, represented as 'YYYY-MM-DDTHH:MM:SS'"
scalar LocalDateTime

"A local time, represented as a time string without timezone information"
scalar LocalTime

"A time, represented as an RFC3339 time string"
scalar Time

input LikesSort {
  someBigInt: SortDirection
  someDateTime: SortDirection
  someDuration: SortDirection
  someFloat: SortDirection
  someId: SortDirection
  someInt: SortDirection
  someLocalDateTime: SortDirection
  someLocalTime: SortDirection
  someString: SortDirection
  someTime: SortDirection
}

input LikesWhere {
  AND: [LikesWhere!]
  NOT: LikesWhere
  OR: [LikesWhere!]
  someBigInt: BigInt
  someBigInt_GT: BigInt
  someBigInt_GTE: BigInt
  someBigInt_IN: [BigInt]
  someBigInt_LT: BigInt
  someBigInt_LTE: BigInt
  someDateTime: DateTime
  someDateTime_GT: DateTime
  someDateTime_GTE: DateTime
  someDateTime_IN: [DateTime]
  someDateTime_LT: DateTime
  someDateTime_LTE: DateTime
  someDuration: Duration
  someDuration_GT: Duration
  someDuration_GTE: Duration
  someDuration_IN: [Duration]
  someDuration_LT: Duration
  someDuration_LTE: Duration
  someFloat: Float
  someFloat_GT: Float
  someFloat_GTE: Float
  someFloat_IN: [Float]
  someFloat_LT: Float
  someFloat_LTE: Float
  someId: ID
  someId_CONTAINS: ID
  someId_ENDS_WITH: ID
  someId_IN: [ID]
  someId_STARTS_WITH: ID
  someInt: Int
  someInt_GT: Int
  someInt_GTE: Int
  someInt_IN: [Int]
  someInt_LT: Int
  someInt_LTE: Int
  someLocalDateTime: LocalDateTime
  someLocalDateTime_GT: LocalDateTime
  someLocalDateTime_GTE: LocalDateTime
  someLocalDateTime_IN: [LocalDateTime]
  someLocalDateTime_LT: LocalDateTime
  someLocalDateTime_LTE: LocalDateTime
  someLocalTime: LocalTime
  someLocalTime_GT: LocalTime
  someLocalTime_GTE: LocalTime
  someLocalTime_IN: [LocalTime]
  someLocalTime_LT: LocalTime
  someLocalTime_LTE: LocalTime
  someString: String
  someString_CONTAINS: String
  someString_ENDS_WITH: String
  someString_IN: [String]
  someString_STARTS_WITH: String
  someTime: Time
  someTime_GT: Time
  someTime_GTE: Time
  someTime_IN: [Time]
  someTime_LT: Time
  someTime_LTE: Time
}

input PostLikesConnectionSort {
  edge: LikesSort
  node: UserSort
}

input PostLikesConnectionWhere {
  AND: [PostLikesConnectionWhere!]
  NOT: PostLikesConnectionWhere
  OR: [PostLikesConnectionWhere!]
  edge: LikesWhere
  node: UserWhere
}

input PostOptions {
  limit: Int
  offset: Int
  "Specify one or more PostSort objects to sort Posts by. The sorts will be applied in the order in which they are arranged in the array."
  sort: [PostSort!]
}

"Fields to sort Posts by. The order in which sorts are applied is not guaranteed when specifying many fields in one PostSort object."
input PostSort {
  title: SortDirection
}

input PostWhere {
  AND: [PostWhere!]
  NOT: PostWhere
  OR: [PostWhere!]
  "Return Posts where all of the related PostLikesConnections match this filter"
  likesConnection_ALL: PostLikesConnectionWhere
  "Return Posts where none of the related PostLikesConnections match this filter"
  likesConnection_NONE: PostLikesConnectionWhere
  "Return Posts where one of the related PostLikesConnections match this filter"
  likesConnection_SINGLE: PostLikesConnectionWhere
  "Return Posts where some of the related PostLikesConnections match this filter"
  likesConnection_SOME: PostLikesConnectionWhere
  "Return Posts where all of the related Users match this filter"
  likes_ALL: UserWhere
  "Return Posts where none of the related Users match this filter"
  likes_NONE: UserWhere
  "Return Posts where one of the related Users match this filter"
  likes_SINGLE: UserWhere
  "Return Posts where some of the related Users match this filter"
  likes_SOME: UserWhere
  title: String
  title_CONTAINS: String
  title_ENDS_WITH: String
  title_IN: [String]
  title_STARTS_WITH: String
}

input UserOptions {
  limit: Int
  offset: Int
  "Specify one or more UserSort objects to sort Users by. The sorts will be applied in the order in which they are arranged in the array."
  sort: [UserSort!]
}

"Fields to sort Users by. The order in which sorts are applied is not guaranteed when specifying many fields in one UserSort object."
input UserSort {
  someBigInt: SortDirection
  someDateTime: SortDirection
  someDuration: SortDirection
  someFloat: SortDirection
  someId: SortDirection
  someInt: SortDirection
  someLocalDateTime: SortDirection
  someLocalTime: SortDirection
  someString: SortDirection
  someTime: SortDirection
}

input UserWhere {
  AND: [UserWhere!]
  NOT: UserWhere
  OR: [UserWhere!]
  someBigInt: BigInt
  someBigInt_GT: BigInt
  someBigInt_GTE: BigInt
  someBigInt_IN: [BigInt]
  someBigInt_LT: BigInt
  someBigInt_LTE: BigInt
  someDateTime: DateTime
  someDateTime_GT: DateTime
  someDateTime_GTE: DateTime
  someDateTime_IN: [DateTime]
  someDateTime_LT: DateTime
  someDateTime_LTE: DateTime
  someDuration: Duration
  someDuration_GT: Duration
  someDuration_GTE: Duration
  someDuration_IN: [Duration]
  someDuration_LT: Duration
  someDuration_LTE: Duration
  someFloat: Float
  someFloat_GT: Float
  someFloat_GTE: Float
  someFloat_IN: [Float]
  someFloat_LT: Float
  someFloat_LTE: Float
  someId: ID
  someId_CONTAINS: ID
  someId_ENDS_WITH: ID
  someId_IN: [ID]
  someId_STARTS_WITH: ID
  someInt: Int
  someInt_GT: Int
  someInt_GTE: Int
  someInt_IN: [Int]
  someInt_LT: Int
  someInt_LTE: Int
  someLocalDateTime: LocalDateTime
  someLocalDateTime_GT: LocalDateTime
  someLocalDateTime_GTE: LocalDateTime
  someLocalDateTime_IN: [LocalDateTime]
  someLocalDateTime_LT: LocalDateTime
  someLocalDateTime_LTE: LocalDateTime
  someLocalTime: LocalTime
  someLocalTime_GT: LocalTime
  someLocalTime_GTE: LocalTime
  someLocalTime_IN: [LocalTime]
  someLocalTime_LT: LocalTime
  someLocalTime_LTE: LocalTime
  someString: String
  someString_CONTAINS: String
  someString_ENDS_WITH: String
  someString_IN: [String]
  someString_STARTS_WITH: String
  someTime: Time
  someTime_GT: Time
  someTime_GTE: Time
  someTime_IN: [Time]
  someTime_LT: Time
  someTime_LTE: Time
}

----

'''
