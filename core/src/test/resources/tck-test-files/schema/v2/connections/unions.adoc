:toc:

= Unions -> Relationship Properties

== Source schema

[source,graphql,schema=true]
----
union Publication = Book | Journal

type Author {
  name: String!
  publications: [Publication!]! @relationship(type: "WROTE", direction: OUT, properties: "Wrote")
}

type Book {
  title: String!
  author: [Author!]! @relationship(type: "WROTE", direction: IN, properties: "Wrote")
}

type Journal {
  subject: String!
  author: [Author!]! @relationship(type: "WROTE", direction: IN, properties: "Wrote")
}

type Wrote @relationshipProperties {
  words: Int!
}
----

== Augmented schema

.Augmented Schema
[source,graphql]
----
schema {
  query: Query
}

union Publication = Book | Journal

type Author {
  name: String!
  publications(directed: Boolean = true, options: QueryOptions, where: PublicationWhere): [Publication!]!
  publicationsConnection(after: String, directed: Boolean = true, first: Int, sort: [AuthorPublicationsConnectionSort!], where: AuthorPublicationsConnectionWhere): AuthorPublicationsConnection!
}

type AuthorEdge {
  cursor: String!
  node: Author!
}

type AuthorPublicationsConnection {
  edges: [AuthorPublicationsRelationship!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type AuthorPublicationsRelationship {
  cursor: String!
  node: Publication!
  properties: Wrote!
}

type AuthorsConnection {
  edges: [AuthorEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type Book {
  author(directed: Boolean = true, options: AuthorOptions, where: AuthorWhere): [Author!]!
  authorConnection(after: String, directed: Boolean = true, first: Int, sort: [BookAuthorConnectionSort!], where: BookAuthorConnectionWhere): BookAuthorConnection!
  title: String!
}

type BookAuthorConnection {
  edges: [BookAuthorRelationship!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type BookAuthorRelationship {
  cursor: String!
  node: Author!
  properties: Wrote!
}

type BookEdge {
  cursor: String!
  node: Book!
}

type BooksConnection {
  edges: [BookEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type Journal {
  author(directed: Boolean = true, options: AuthorOptions, where: AuthorWhere): [Author!]!
  authorConnection(after: String, directed: Boolean = true, first: Int, sort: [JournalAuthorConnectionSort!], where: JournalAuthorConnectionWhere): JournalAuthorConnection!
  subject: String!
}

type JournalAuthorConnection {
  edges: [JournalAuthorRelationship!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type JournalAuthorRelationship {
  cursor: String!
  node: Author!
  properties: Wrote!
}

type JournalEdge {
  cursor: String!
  node: Journal!
}

type JournalsConnection {
  edges: [JournalEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

"Pagination information (Relay)"
type PageInfo {
  endCursor: String
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
}

type Query {
  authors(options: AuthorOptions, where: AuthorWhere): [Author!]!
  authorsConnection(after: String, first: Int, sort: [AuthorSort], where: AuthorWhere): AuthorsConnection!
  books(options: BookOptions, where: BookWhere): [Book!]!
  booksConnection(after: String, first: Int, sort: [BookSort], where: BookWhere): BooksConnection!
  journals(options: JournalOptions, where: JournalWhere): [Journal!]!
  journalsConnection(after: String, first: Int, sort: [JournalSort], where: JournalWhere): JournalsConnection!
  publications(options: QueryOptions, where: PublicationWhere): [Publication!]!
}

"""
The edge properties for the following fields:
* Author.publications
* Book.author
* Journal.author
"""
type Wrote {
  words: Int!
}

"An enum for sorting in either ascending or descending order."
enum SortDirection {
  "Sort by field values in ascending order."
  ASC
  "Sort by field values in descending order."
  DESC
}

input AuthorOptions {
  limit: Int
  offset: Int
  "Specify one or more AuthorSort objects to sort Authors by. The sorts will be applied in the order in which they are arranged in the array."
  sort: [AuthorSort!]
}

input AuthorPublicationsBookConnectionWhere {
  AND: [AuthorPublicationsBookConnectionWhere!]
  NOT: AuthorPublicationsBookConnectionWhere
  OR: [AuthorPublicationsBookConnectionWhere!]
  edge: WroteWhere
  node: BookWhere
}

input AuthorPublicationsConnectionSort {
  edge: WroteSort
}

input AuthorPublicationsConnectionWhere {
  Book: AuthorPublicationsBookConnectionWhere
  Journal: AuthorPublicationsJournalConnectionWhere
}

input AuthorPublicationsJournalConnectionWhere {
  AND: [AuthorPublicationsJournalConnectionWhere!]
  NOT: AuthorPublicationsJournalConnectionWhere
  OR: [AuthorPublicationsJournalConnectionWhere!]
  edge: WroteWhere
  node: JournalWhere
}

"Fields to sort Authors by. The order in which sorts are applied is not guaranteed when specifying many fields in one AuthorSort object."
input AuthorSort {
  name: SortDirection
}

input AuthorWhere {
  AND: [AuthorWhere!]
  NOT: AuthorWhere
  OR: [AuthorWhere!]
  name: String
  name_CONTAINS: String
  name_ENDS_WITH: String
  name_IN: [String!]
  name_STARTS_WITH: String
  "Return Authors where all of the related AuthorPublicationsConnections match this filter"
  publicationsConnection_ALL: AuthorPublicationsConnectionWhere
  "Return Authors where none of the related AuthorPublicationsConnections match this filter"
  publicationsConnection_NONE: AuthorPublicationsConnectionWhere
  "Return Authors where one of the related AuthorPublicationsConnections match this filter"
  publicationsConnection_SINGLE: AuthorPublicationsConnectionWhere
  "Return Authors where some of the related AuthorPublicationsConnections match this filter"
  publicationsConnection_SOME: AuthorPublicationsConnectionWhere
  "Return Authors where all of the related Publications match this filter"
  publications_ALL: PublicationWhere
  "Return Authors where none of the related Publications match this filter"
  publications_NONE: PublicationWhere
  "Return Authors where one of the related Publications match this filter"
  publications_SINGLE: PublicationWhere
  "Return Authors where some of the related Publications match this filter"
  publications_SOME: PublicationWhere
}

input BookAuthorConnectionSort {
  edge: WroteSort
  node: AuthorSort
}

input BookAuthorConnectionWhere {
  AND: [BookAuthorConnectionWhere!]
  NOT: BookAuthorConnectionWhere
  OR: [BookAuthorConnectionWhere!]
  edge: WroteWhere
  node: AuthorWhere
}

input BookOptions {
  limit: Int
  offset: Int
  "Specify one or more BookSort objects to sort Books by. The sorts will be applied in the order in which they are arranged in the array."
  sort: [BookSort!]
}

"Fields to sort Books by. The order in which sorts are applied is not guaranteed when specifying many fields in one BookSort object."
input BookSort {
  title: SortDirection
}

input BookWhere {
  AND: [BookWhere!]
  NOT: BookWhere
  OR: [BookWhere!]
  "Return Books where all of the related BookAuthorConnections match this filter"
  authorConnection_ALL: BookAuthorConnectionWhere
  "Return Books where none of the related BookAuthorConnections match this filter"
  authorConnection_NONE: BookAuthorConnectionWhere
  "Return Books where one of the related BookAuthorConnections match this filter"
  authorConnection_SINGLE: BookAuthorConnectionWhere
  "Return Books where some of the related BookAuthorConnections match this filter"
  authorConnection_SOME: BookAuthorConnectionWhere
  "Return Books where all of the related Authors match this filter"
  author_ALL: AuthorWhere
  "Return Books where none of the related Authors match this filter"
  author_NONE: AuthorWhere
  "Return Books where one of the related Authors match this filter"
  author_SINGLE: AuthorWhere
  "Return Books where some of the related Authors match this filter"
  author_SOME: AuthorWhere
  title: String
  title_CONTAINS: String
  title_ENDS_WITH: String
  title_IN: [String!]
  title_STARTS_WITH: String
}

input JournalAuthorConnectionSort {
  edge: WroteSort
  node: AuthorSort
}

input JournalAuthorConnectionWhere {
  AND: [JournalAuthorConnectionWhere!]
  NOT: JournalAuthorConnectionWhere
  OR: [JournalAuthorConnectionWhere!]
  edge: WroteWhere
  node: AuthorWhere
}

input JournalOptions {
  limit: Int
  offset: Int
  "Specify one or more JournalSort objects to sort Journals by. The sorts will be applied in the order in which they are arranged in the array."
  sort: [JournalSort!]
}

"Fields to sort Journals by. The order in which sorts are applied is not guaranteed when specifying many fields in one JournalSort object."
input JournalSort {
  subject: SortDirection
}

input JournalWhere {
  AND: [JournalWhere!]
  NOT: JournalWhere
  OR: [JournalWhere!]
  "Return Journals where all of the related JournalAuthorConnections match this filter"
  authorConnection_ALL: JournalAuthorConnectionWhere
  "Return Journals where none of the related JournalAuthorConnections match this filter"
  authorConnection_NONE: JournalAuthorConnectionWhere
  "Return Journals where one of the related JournalAuthorConnections match this filter"
  authorConnection_SINGLE: JournalAuthorConnectionWhere
  "Return Journals where some of the related JournalAuthorConnections match this filter"
  authorConnection_SOME: JournalAuthorConnectionWhere
  "Return Journals where all of the related Authors match this filter"
  author_ALL: AuthorWhere
  "Return Journals where none of the related Authors match this filter"
  author_NONE: AuthorWhere
  "Return Journals where one of the related Authors match this filter"
  author_SINGLE: AuthorWhere
  "Return Journals where some of the related Authors match this filter"
  author_SOME: AuthorWhere
  subject: String
  subject_CONTAINS: String
  subject_ENDS_WITH: String
  subject_IN: [String!]
  subject_STARTS_WITH: String
}

input PublicationWhere {
  Book: BookWhere
  Journal: JournalWhere
}

"Input type for options that can be specified on a query operation."
input QueryOptions {
  limit: Int
  offset: Int
}

input WroteSort {
  words: SortDirection
}

input WroteWhere {
  AND: [WroteWhere!]
  NOT: WroteWhere
  OR: [WroteWhere!]
  words: Int
  words_GT: Int
  words_GTE: Int
  words_IN: [Int!]
  words_LT: Int
  words_LTE: Int
}

----

'''
